<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
		<ul id="list">
			<li class="on">1</li>
			<li class="select">2</li>
			<li class="on">3</li>
			<li>4</li>
		</ul>
		<p class="on">class为on的p标签</p>
</body>
</html>
<script type="text/javascript">
  window.onload=function(){
     var len1= getByClass('on','list');
     alert(len1.length);  // 结果等于2为正确
    
     var len2= getByClass('on');
     alert(len2.length);  // 结果等于3为正确
}

function getByClass(clsName, parent){
     if (parent){
        var oParent = document.getElementById(parent);
    }else{
        var oParent = document;
    }; 
     var arr=[];
     var elements = oParent.getElementsByTagName('*');
     for (var i in elements){
         if(elements[i].className == clsName){
             arr.push(elements[i]);
         };
    };

    return arr;
}
</script>